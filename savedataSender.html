<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        if(window.parent == null || window.parent == window){
            let item = {a: "aaa", b: "bbb"};
            localStorage.setItem("test", JSON.stringify(item));
            window.onload = function(){
                $("<div>").text(localStorage.getItem("calc_saveData")).appendTo(document.body);
                $("<div>").text(localStorage.getItem("visitlevel_saveData")).appendTo(document.body);
            }
            console.log(localStorage.getItem("calc_saveData"));
            console.log(localStorage.getItem("visitlevel_saveData"));
        }else{
            const calc_data = localStorage.getItem("calc_saveData");
            const visit_data = localStorage.getItem("visitlevel_saveData");
            if(calc_data == null || calc_data.length == 0){
                calc_data = "nodata";
            }
            if(visit_data == null || visit_data.length == 0){
                visit_data = "nodata";
            }
            window.parent.postMessage({calc_data: calc_data, visit_data: visit_data}, "https://hanishina.net");
        }

    </script>
</head>
<body>

</body>
</html>