<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>zoomtest</title>
  <link href="./Plugins/viewer.css" rel="stylesheet" type="text/css">
  <script src="./Plugins/viewer.js"></script>
  <link href="historymap.css" rel="stylesheet" type="text/css">


  <script>
    let viewer;
    let x = 0;
    let y = 0;
    let z = 1;

    function init(){
      let form = document.forms.select;
      form.year.value = 2020;
      form.grid.value = "grid";
      form.label.value = "label";

      viewer = new Viewer(document.getElementById('image'), {
        inline: true,
        toolbar: false,
        navbar: false,
        title: false,
        zoomRatio: 0.2,
        minZoomRatio: 0.05,
        maxZoomRatio: 2,
      });
      /*document.getElementById("image").addEventListener("moved", function(e){
        x = e.detail.x;
        y = e.detail.y;
      });
      document.getElementById("image").addEventListener("zoomed", function(e){
        z = e.detail.ratio;
      });*/
      document.getElementById("image").addEventListener("viewed", function(e){
        //viewer.moveTo(x, y);
        viewer.zoomTo(0.2);
      });
    }

    function button(){
      let form = document.forms.select;

      let image = document.getElementById("image");
      let src = "./img/largemap/lambert_" + form.year.value + "_color_" + form.grid.value + "_" + form.label.value + ".jpg";
      image.setAttribute("src", src);
      viewer.update();

    }
  </script>
</head>
<body onload="init()">
  <div class="header">
    <div class="title">全国市区町村地図</div>
    <div><i class="fas fa-home" style="color: #05a"></i><a href="./">トップページ</a></div>
  </div>
  <div>大きな画像を読み込むため、表示に時間がかかる場合があります。</div>
  <div><form name="select">
    <div class="radiobutton"><span>年：<label><input type="radio" name="year" value="1970">1970年</label><label><input type="radio" name="year" value="2000">2000年</label><label><input type="radio" name="year" value="2020">2020年</label></span>
    <span>経緯線：<label><input type="radio" name="grid" value="nogrid">なし</label><label><input type="radio" name="grid" value="grid">あり</label></span>
    <span>市町村名ラベル：<label><input type="radio" name="label" value="nolabel">なし</label><label><input type="radio" name="label" value="label">あり</label></span></div>
    <div><button type="button" onclick="button()">上記の設定で表示</button></div>
  </form></div>
  <div class="zoomContainer" id="zC">
    <img id="image" class="zoomImg" src="./img/largemap/lambert_2020_color_grid_label.jpg">
  </div>
</body>
</html>
